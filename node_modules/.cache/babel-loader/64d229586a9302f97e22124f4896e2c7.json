{"ast":null,"code":"var _jsxFileName = \"/var/www/html/projects/reactapp/src/components/Login.js\";\nimport React from 'react';\nimport { Form, Input, Button } from 'antd';\nimport axios from 'axios';\nimport qs from 'qs';\nimport store from '../store';\nconst layout = {\n  labelCol: {\n    span: 8\n  },\n  wrapperCol: {\n    span: 16\n  }\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16\n  }\n};\n\nclass Login extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onFinish = values => {\n      console.log('Success:', values);\n      axios.post('http://lumenauthapp.com/api/login', qs.stringify({\n        email: values.email,\n        password: values.password\n      })).then(res => {\n        //update redux state\n        store.dispatch({\n          type: 'LOGIN',\n          value: true,\n          token: res.data.token\n        }); //store in localstorage\n\n        localStorage.setItem(\"login\", true);\n        localStorage.setItem(\"token\", res.data.token);\n        this.setState({\n          login: true,\n          token: res.data.token\n        });\n        this.props.history.push(\"/\"); //redirect to dashboard\n        //logging\n        // console.log(res);\n        // console.log(res.data);\n      }, error => {//update redux state\n        // store.dispatch({type: 'LOGIN', value: false, token: null});\n        //store in localstorage\n        // localStorage.setItem(\"login\", false);\n        // localStorage.setItem(\"token\", null);\n        //logging\n        // console.log('In error');\n        // console.log(error.response.data);\n      });\n    };\n\n    this.onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    this.state = {};\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Form, Object.assign({}, layout, {\n      name: \"basic\",\n      initialValues: {\n        remember: true,\n        size: 'small'\n      },\n      onFinish: this.onFinish,\n      onFinishFailed: this.onFinishFailed,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Email\",\n      name: \"email\",\n      rules: [{\n        required: true,\n        message: 'Email is required.'\n      }, {\n        type: 'email',\n        message: 'Please enter a valid email.'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, {\n      label: \"Password\",\n      name: \"password\",\n      rules: [{\n        required: true,\n        message: 'Password is required.'\n      }],\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Input.Password, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }\n    })), /*#__PURE__*/React.createElement(Form.Item, Object.assign({}, tailLayout, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(Button, {\n      type: \"primary\",\n      htmlType: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }\n    }, \"Login\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["/var/www/html/projects/reactapp/src/components/Login.js"],"names":["React","Form","Input","Button","axios","qs","store","layout","labelCol","span","wrapperCol","tailLayout","offset","Login","Component","constructor","props","onFinish","values","console","log","post","stringify","email","password","then","res","dispatch","type","value","token","data","localStorage","setItem","setState","login","history","push","error","onFinishFailed","errorInfo","state","render","remember","size","required","message"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Form, Input, Button } from 'antd';\nimport axios from 'axios';\nimport qs from 'qs';\nimport store from '../store';\n\nconst layout = {\n  labelCol: {\n    span: 8,\n  },\n  wrapperCol: {\n    span: 16,\n  },\n};\nconst tailLayout = {\n  wrapperCol: {\n    offset: 8,\n    span: 16,\n  },\n};\n\nclass Login extends React.Component {\n\n  constructor(props)\n  {\n    super(props);\n    this.state = {\n\n    }\n  }\n\n  onFinish = (values) => {\n    \n    console.log('Success:', values);\n\n    axios.post(\n      'http://lumenauthapp.com/api/login', \n      qs.stringify({ \n        email: values.email, \n        password: values.password\n      }))\n      .then(res => {\n\n        //update redux state\n        store.dispatch({type: 'LOGIN', value: true, token: res.data.token});\n\n        //store in localstorage\n        localStorage.setItem(\"login\", true);\n        localStorage.setItem(\"token\", res.data.token);\n\n        this.setState({\n          login: true,\n          token: res.data.token\n        });\n\n        this.props.history.push(\"/\");\n        \n\n        //redirect to dashboard\n        //logging\n        // console.log(res);\n        // console.log(res.data);\n\n    }, (error) => {\n      //update redux state\n      // store.dispatch({type: 'LOGIN', value: false, token: null});\n\n      //store in localstorage\n      // localStorage.setItem(\"login\", false);\n      // localStorage.setItem(\"token\", null);\n\n      //logging\n      // console.log('In error');\n      // console.log(error.response.data);\n    });\n  };\n\n  onFinishFailed = (errorInfo) => {\n    console.log('Failed:', errorInfo);\n  };\n\n  render() {\n    return(\n      <Form\n      {...layout}\n      name=\"basic\"\n      initialValues={{\n        remember: true,\n        size: 'small',\n      }}\n      onFinish={this.onFinish}\n      onFinishFailed={this.onFinishFailed}\n    >\n      <Form.Item\n        label=\"Email\"\n        name=\"email\"\n        rules={[\n          {\n            required: true,\n            message: 'Email is required.'\n          },\n          {\n            type: 'email',\n            message: 'Please enter a valid email.'\n          }\n        ]}\n      >\n        <Input />\n      </Form.Item>\n\n      <Form.Item\n        label=\"Password\"\n        name=\"password\"\n        rules={[\n          {\n            required: true,\n            message: 'Password is required.'\n          },\n        ]}\n      >\n        <Input.Password />\n      </Form.Item>\n\n      <Form.Item {...tailLayout}>\n        <Button type=\"primary\" htmlType=\"submit\">\n          Login\n        </Button>\n      </Form.Item>\n    </Form>\n    )\n  }\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}